<div [formGroup]="currentForm">
    <div formArrayName="addresses">
        <div
            *ngFor="let formAddress of addressesControls; let i = index"
            [formGroup]="formAddress"
            class="form-address"
        >
            <button
                mat-fab
                color="primary"
                aria-label="Example icon button with a delete icon"
                (click)="deleteAddressControl(i)"
            >
                <mat-icon>delete</mat-icon>
            </button>

            <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>Address</mat-label>
                <textarea matInput formControlName="address"></textarea>
                <mat-error>
                    <app-error-validator [control]="formAddress.get('address')"></app-error-validator>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>City</mat-label>
                <input matInput formControlName="city" />
            </mat-form-field>

            <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>Zip</mat-label>
                <input matInput formControlName="zip" />
                <mat-error>
                    <app-error-validator [control]="formAddress.get('zip')"></app-error-validator>
                </mat-error>
            </mat-form-field>
        </div>
        <button mat-stroked-button color="warn" (click)="addNewAddress()">Add new address</button>
    </div>
</div>
